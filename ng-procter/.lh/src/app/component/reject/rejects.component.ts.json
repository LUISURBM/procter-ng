{
    "sourceFile": "src/app/component/reject/rejects.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 14,
            "patches": [
                {
                    "date": 1635723660504,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1635800675889,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import { formatDate } from '@angular/common';\r\n-import { Component, OnDestroy, OnInit } from '@angular/core';\r\n+import { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\n import { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\n import { Router } from '@angular/router';\r\n import { Subscription } from 'rxjs';\r\n import { filter } from 'rxjs/operators';\r\n@@ -9,8 +9,9 @@\n import { UIStateService } from 'src/app/shared/spinner/load-widget.service';\r\n import { ToastService } from '../toast/toast.service';\r\n import { ProcterValidator } from './procter-validator';\r\n import { rejectsCfg } from './rejects';\r\n+import { WebDataRocksPivot } from './webdatarocks';\r\n \r\n @Component({\r\n \tselector: 'app-rejects-basic',\r\n \ttemplateUrl: 'rejects.component.html',\r\n@@ -23,8 +24,10 @@\n \tmaxDate: Date = new Date();\r\n \tgroup: FormGroup;\r\n \treport: any;\r\n \tsubscriptions: Subscription[] = [];\r\n+\t@ViewChild('report', { static: false})\r\n+\tpivot: ElementRef;\r\n \r\n \tconstructor(private builder: FormBuilder, private planeacion: PlaneacionService, public toastService: ToastService, public bundleSrv: BundleService,\r\n \t\tpublic state: UIStateService,\r\n \t\tprivate router: Router) {\r\n@@ -73,8 +76,9 @@\n \t\t\t\tnext: (resp: any[]) => {\r\n \t\t\t\t\tconsole.log(resp)\r\n \t\t\t\t\tthis.report = { ...rejectsCfg, dataSource: { data: resp } };\r\n \t\t\t\t\tthis.rejects = resp;\r\n+\t\t\t\t\tvar pivot = new WebDataRocksPivot(this.pivot);\r\n \t\t\t\t}\r\n \t\t\t});\r\n \t}\r\n }\r\n"
                },
                {
                    "date": 1635817089305,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n import { UIStateService } from 'src/app/shared/spinner/load-widget.service';\r\n import { ToastService } from '../toast/toast.service';\r\n import { ProcterValidator } from './procter-validator';\r\n import { rejectsCfg } from './rejects';\r\n-import { WebDataRocksPivot } from './webdatarocks';\r\n+import { WebDataRocksPivot } from './pivot/webdatarocks';\r\n \r\n @Component({\r\n \tselector: 'app-rejects-basic',\r\n \ttemplateUrl: 'rejects.component.html',\r\n"
                },
                {
                    "date": 1635823318661,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n import { UIStateService } from 'src/app/shared/spinner/load-widget.service';\r\n import { ToastService } from '../toast/toast.service';\r\n import { ProcterValidator } from './procter-validator';\r\n import { rejectsCfg } from './rejects';\r\n-import { WebDataRocksPivot } from './pivot/webdatarocks';\r\n+import { WebDataRocksPivot } from '../../../assets/js/pivot/webdatarocks';\r\n \r\n @Component({\r\n \tselector: 'app-rejects-basic',\r\n \ttemplateUrl: 'rejects.component.html',\r\n"
                },
                {
                    "date": 1635824049268,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n import { UIStateService } from 'src/app/shared/spinner/load-widget.service';\r\n import { ToastService } from '../toast/toast.service';\r\n import { ProcterValidator } from './procter-validator';\r\n import { rejectsCfg } from './rejects';\r\n-import { WebDataRocksPivot } from '../../../assets/js/pivot/webdatarocks';\r\n+import { WebDataRocksPivot } from './pivot/webdatarocks';\r\n \r\n @Component({\r\n \tselector: 'app-rejects-basic',\r\n \ttemplateUrl: 'rejects.component.html',\r\n"
                },
                {
                    "date": 1635824965345,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,11 +73,11 @@\n \tobtenerRechazos(value: any) {\r\n \t\tthis.planeacion.obtenerRechazos(value)\r\n \t\t\t.subscribe({\r\n \t\t\t\tnext: (resp: any[]) => {\r\n-\t\t\t\t\tconsole.log(resp)\r\n \t\t\t\t\tthis.report = { ...rejectsCfg, dataSource: { data: resp } };\r\n \t\t\t\t\tthis.rejects = resp;\r\n+\t\t\t\t\tconsole.log(this.report)\r\n \t\t\t\t\tvar pivot = new WebDataRocksPivot(this.pivot);\r\n \t\t\t\t}\r\n \t\t\t});\r\n \t}\r\n"
                },
                {
                    "date": 1635825251761,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,9 +76,10 @@\n \t\t\t\tnext: (resp: any[]) => {\r\n \t\t\t\t\tthis.report = { ...rejectsCfg, dataSource: { data: resp } };\r\n \t\t\t\t\tthis.rejects = resp;\r\n \t\t\t\t\tconsole.log(this.report)\r\n-\t\t\t\t\tvar pivot = new WebDataRocksPivot(this.pivot);\r\n+\t\t\t\t\tif(resp && resp.length > 0)\r\n+\t\t\t\t\t\tvar pivot = new WebDataRocksPivot(this.pivot);\r\n \t\t\t\t}\r\n \t\t\t});\r\n \t}\r\n }\r\n"
                },
                {
                    "date": 1635825622475,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,9 +77,9 @@\n \t\t\t\t\tthis.report = { ...rejectsCfg, dataSource: { data: resp } };\r\n \t\t\t\t\tthis.rejects = resp;\r\n \t\t\t\t\tconsole.log(this.report)\r\n \t\t\t\t\tif(resp && resp.length > 0)\r\n-\t\t\t\t\t\tvar pivot = new WebDataRocksPivot(this.pivot);\r\n+\t\t\t\t\t\t// var pivot = new WebDataRocksPivot(this.pivot);\r\n \t\t\t\t}\r\n \t\t\t});\r\n \t}\r\n }\r\n"
                },
                {
                    "date": 1635826147145,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import { formatDate } from '@angular/common';\r\n-import { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\n+import { ChangeDetectionStrategy, Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\n import { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\n import { Router } from '@angular/router';\r\n import { Subscription } from 'rxjs';\r\n import { filter } from 'rxjs/operators';\r\n@@ -14,9 +14,10 @@\n \r\n @Component({\r\n \tselector: 'app-rejects-basic',\r\n \ttemplateUrl: 'rejects.component.html',\r\n-\tstyleUrls: ['./rejects.component.scss']\r\n+\tstyleUrls: ['./rejects.component.scss'],\r\n+\tchangeDetection: ChangeDetectionStrategy.OnPush\r\n })\r\n export class RejectsComponent implements OnInit, OnDestroy {\r\n \trejects: any[] = [];\r\n \r\n@@ -77,9 +78,9 @@\n \t\t\t\t\tthis.report = { ...rejectsCfg, dataSource: { data: resp } };\r\n \t\t\t\t\tthis.rejects = resp;\r\n \t\t\t\t\tconsole.log(this.report)\r\n \t\t\t\t\tif(resp && resp.length > 0)\r\n-\t\t\t\t\t\t// var pivot = new WebDataRocksPivot(this.pivot);\r\n+\t\t\t\t\t\tvar pivot = new WebDataRocksPivot(this.pivot);\r\n \t\t\t\t}\r\n \t\t\t});\r\n \t}\r\n }\r\n"
                },
                {
                    "date": 1635826180411,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,10 +14,9 @@\n \r\n @Component({\r\n \tselector: 'app-rejects-basic',\r\n \ttemplateUrl: 'rejects.component.html',\r\n-\tstyleUrls: ['./rejects.component.scss'],\r\n-\tchangeDetection: ChangeDetectionStrategy.OnPush\r\n+\tstyleUrls: ['./rejects.component.scss']\r\n })\r\n export class RejectsComponent implements OnInit, OnDestroy {\r\n \trejects: any[] = [];\r\n \r\n"
                },
                {
                    "date": 1635826262465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,10 +76,14 @@\n \t\t\t\tnext: (resp: any[]) => {\r\n \t\t\t\t\tthis.report = { ...rejectsCfg, dataSource: { data: resp } };\r\n \t\t\t\t\tthis.rejects = resp;\r\n \t\t\t\t\tconsole.log(this.report)\r\n-\t\t\t\t\tif(resp && resp.length > 0)\r\n+\t\t\t\t\tif(resp && resp.length > 0){\r\n+\t\t\t\t\t\tdebugger\r\n \t\t\t\t\t\tvar pivot = new WebDataRocksPivot(this.pivot);\r\n+\t\t\t\t\t\tpivot.report = this.report;\r\n+\t\t\t\t\t}\r\n+\t\t\t\t\t\t\r\n \t\t\t\t}\r\n \t\t\t});\r\n \t}\r\n }\r\n"
                },
                {
                    "date": 1635826402325,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,11 +77,11 @@\n \t\t\t\t\tthis.report = { ...rejectsCfg, dataSource: { data: resp } };\r\n \t\t\t\t\tthis.rejects = resp;\r\n \t\t\t\t\tconsole.log(this.report)\r\n \t\t\t\t\tif(resp && resp.length > 0){\r\n-\t\t\t\t\t\tdebugger\r\n-\t\t\t\t\t\tvar pivot = new WebDataRocksPivot(this.pivot);\r\n-\t\t\t\t\t\tpivot.report = this.report;\r\n+\t\t\t\t\t\t// debugger\r\n+\t\t\t\t\t\t// var pivot = new WebDataRocksPivot(this.pivot);\r\n+\t\t\t\t\t\t// pivot.report = this.report;\r\n \t\t\t\t\t}\r\n \t\t\t\t\t\t\r\n \t\t\t\t}\r\n \t\t\t});\r\n"
                },
                {
                    "date": 1635826858128,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,11 +77,11 @@\n \t\t\t\t\tthis.report = { ...rejectsCfg, dataSource: { data: resp } };\r\n \t\t\t\t\tthis.rejects = resp;\r\n \t\t\t\t\tconsole.log(this.report)\r\n \t\t\t\t\tif(resp && resp.length > 0){\r\n-\t\t\t\t\t\t// debugger\r\n-\t\t\t\t\t\t// var pivot = new WebDataRocksPivot(this.pivot);\r\n-\t\t\t\t\t\t// pivot.report = this.report;\r\n+\t\t\t\t\t\tdebugger\r\n+\t\t\t\t\t\tvar pivot = new WebDataRocksPivot(this.pivot);\r\n+\t\t\t\t\t\tpivot.report = this.report;\r\n \t\t\t\t\t}\r\n \t\t\t\t\t\t\r\n \t\t\t\t}\r\n \t\t\t});\r\n"
                },
                {
                    "date": 1635827004240,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n \tmaxDate: Date = new Date();\r\n \tgroup: FormGroup;\r\n \treport: any;\r\n \tsubscriptions: Subscription[] = [];\r\n-\t@ViewChild('report', { static: false})\r\n+\t@ViewChild('report', { static: false })\r\n \tpivot: ElementRef;\r\n \r\n \tconstructor(private builder: FormBuilder, private planeacion: PlaneacionService, public toastService: ToastService, public bundleSrv: BundleService,\r\n \t\tpublic state: UIStateService,\r\n@@ -76,14 +76,15 @@\n \t\t\t\tnext: (resp: any[]) => {\r\n \t\t\t\t\tthis.report = { ...rejectsCfg, dataSource: { data: resp } };\r\n \t\t\t\t\tthis.rejects = resp;\r\n \t\t\t\t\tconsole.log(this.report)\r\n-\t\t\t\t\tif(resp && resp.length > 0){\r\n+\t\t\t\t\tif (resp && resp.length > 0) {\r\n \t\t\t\t\t\tdebugger\r\n \t\t\t\t\t\tvar pivot = new WebDataRocksPivot(this.pivot);\r\n-\t\t\t\t\t\tpivot.report = this.report;\r\n+\t\t\t\t\t\tpivot.webDataRocks.off('reportcomplete');\r\n+\t\t\t\t\t\tpivot.webDataRocks.setReport(this.report)\r\n \t\t\t\t\t}\r\n-\t\t\t\t\t\t\r\n+\r\n \t\t\t\t}\r\n \t\t\t});\r\n \t}\r\n }\r\n"
                },
                {
                    "date": 1635827775299,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,9 @@\n \tgroup: FormGroup;\r\n \treport: any;\r\n \tsubscriptions: Subscription[] = [];\r\n \t@ViewChild('report', { static: false })\r\n-\tpivot: ElementRef;\r\n+\tpivot: WebDataRocksPivot;\r\n \r\n \tconstructor(private builder: FormBuilder, private planeacion: PlaneacionService, public toastService: ToastService, public bundleSrv: BundleService,\r\n \t\tpublic state: UIStateService,\r\n \t\tprivate router: Router) {\r\n@@ -78,11 +78,10 @@\n \t\t\t\t\tthis.rejects = resp;\r\n \t\t\t\t\tconsole.log(this.report)\r\n \t\t\t\t\tif (resp && resp.length > 0) {\r\n \t\t\t\t\t\tdebugger\r\n-\t\t\t\t\t\tvar pivot = new WebDataRocksPivot(this.pivot);\r\n-\t\t\t\t\t\tpivot.webDataRocks.off('reportcomplete');\r\n-\t\t\t\t\t\tpivot.webDataRocks.setReport(this.report)\r\n+\t\t\t\t\t\tthis.pivot.webDataRocks.off('reportcomplete');\r\n+\t\t\t\t\t\tthis.pivot.webDataRocks.setReport(this.report)\r\n \t\t\t\t\t}\r\n \r\n \t\t\t\t}\r\n \t\t\t});\r\n"
                }
            ],
            "date": 1635723660503,
            "name": "Commit-0",
            "content": "import { formatDate } from '@angular/common';\r\nimport { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\nimport { BundleService } from 'src/app/bundle.service';\r\nimport { PlaneacionService } from 'src/app/planeacion.service';\r\nimport { UIStateService } from 'src/app/shared/spinner/load-widget.service';\r\nimport { ToastService } from '../toast/toast.service';\r\nimport { ProcterValidator } from './procter-validator';\r\nimport { rejectsCfg } from './rejects';\r\n\r\n@Component({\r\n\tselector: 'app-rejects-basic',\r\n\ttemplateUrl: 'rejects.component.html',\r\n\tstyleUrls: ['./rejects.component.scss']\r\n})\r\nexport class RejectsComponent implements OnInit, OnDestroy {\r\n\trejects: any[] = [];\r\n\r\n\tminDate: Date = new Date();\r\n\tmaxDate: Date = new Date();\r\n\tgroup: FormGroup;\r\n\treport: any;\r\n\tsubscriptions: Subscription[] = [];\r\n\r\n\tconstructor(private builder: FormBuilder, private planeacion: PlaneacionService, public toastService: ToastService, public bundleSrv: BundleService,\r\n\t\tpublic state: UIStateService,\r\n\t\tprivate router: Router) {\r\n\t\tthis.subscriptions = [];\r\n\t\tthis.group = builder.group({\r\n\t\t\tfechainicio: new FormControl(formatDate(this.maxDate, 'yyyy-MM-ddTHH:mm', 'es-Co'), [Validators.required, ProcterValidator.maxDateToday]),\r\n\t\t\tfechafin: new FormControl(formatDate(this.maxDate, 'yyyy-MM-ddTHH:mm', 'es-Co'), [Validators.required, ProcterValidator.maxDateToday]),\r\n\t\t})\r\n\t\tthis.minDate.setFullYear(new Date().getFullYear() - 1);\r\n\t}\r\n\r\n\tngOnInit(): void {\r\n\t\tthis.obtenerRechazos(this.group.value);\r\n\t\tthis.group.valueChanges\r\n\t\t\t.pipe(filter(c => this.group.valid)).subscribe({\r\n\t\t\t\tnext: (v) => this.obtenerRechazos(v)\r\n\t\t\t})\r\n\t}\r\n\tngOnDestroy(): void {\r\n\t\tthis.subscriptions.forEach(e => e.unsubscribe())\r\n\t}\r\n\r\n\tclear(control) {\r\n\t\tthis.group.reset();\r\n\t}\r\n\r\n\tfechainicio() {\r\n\t\tif (this.group.value.fechainicio && new Date(this.group.value.fechainicio) > new Date())\r\n\t\t\tthis.group.patchValue({ fechainicio: undefined });\r\n\r\n\t}\r\n\tfechafin() {\r\n\t\tif (this.group.value.fechafin && new Date(this.group.value.fechafin) > new Date())\r\n\t\t\tthis.group.patchValue({ fechafin: undefined });\r\n\r\n\t}\r\n\r\n\tver() {\r\n\t\tthis.router.navigate(['/component/reject', {}]);\r\n\t}\r\n\r\n\r\n\tobtenerRechazos(value: any) {\r\n\t\tthis.planeacion.obtenerRechazos(value)\r\n\t\t\t.subscribe({\r\n\t\t\t\tnext: (resp: any[]) => {\r\n\t\t\t\t\tconsole.log(resp)\r\n\t\t\t\t\tthis.report = { ...rejectsCfg, dataSource: { data: resp } };\r\n\t\t\t\t\tthis.rejects = resp;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n}\r\n"
        }
    ]
}